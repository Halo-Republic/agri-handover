(this.webpackJsonp=this.webpackJsonp||[]).push([[26],{1107:function(e,t,n){"use strict";var r=n(764);n.n(r).a},1195:function(e,t,n){"use strict";n.r(t);n(28),n(12),n(10),n(179);var main=n(633),r=n(639),o=n(137),l=n.n(o),c=(n(1),n(611),{components:{AgGridVue:main.AgGridVue,addingAssets:r.a,vSelect:l.a},data:function(){return{searchQuery:"",gridOptions:{},maxPageNumbers:7,popupActivo:!1,gridApi:null,defaultColDef:{sortable:!0,editable:!0,resizable:!0,suppressMenu:!0},columnDefs:[{headerName:"ID",field:"id",width:125,filter:!0,checkboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,headerCheckboxSelection:!0},{headerName:"Category",field:"asset_type",width:175,filter:!0},{headerName:"Title",field:"asset_name",filter:!0,width:250,pinned:"left",sortable:!0,resizable:!0,editable:!0},{headerName:"Amount",field:"price",filter:!0,width:150},{headerName:"Quantity",field:"quantity",filter:!0,width:150},{headerName:"Reference",field:"reference",filter:!0,width:150},{headerName:"Branch",field:"branch",filter:!0,width:150},{headerName:"Documentation",field:"documentation",filter:!0,width:125},{headerName:"Date",field:"created_date",filter:!0,width:125}]}},watch:{"$store.state.windowWidth":function(e){e<=576?(this.maxPageNumbers=4,this.gridOptions.columnApi.setColumnPinned("email",null)):this.gridOptions.columnApi.setColumnPinned("email","left")}},computed:{total_assets:function(){return this.$store.state.crm.total_assets},assets_indv:function(){return this.$store.state.crm.assets_indv},company_assets:function(){for(var e=[],t=Object.entries(this.total_assets),i=0;i<t.length;i++){var n={};n.name=t[i][0],n.val=t[i][1].val,e.push(n)}return e},activeBusinessInfo:function(){return this.$store.state.business.app_active_business},activeUserInfo:function(){return this.$store.state.user.app_displayed_user},paginationPageSize:function(){return this.gridApi?this.gridApi.paginationGetPageSize():50},totalPages:function(){return this.gridApi?this.gridApi.paginationGetTotalPages():0},currentPage:{get:function(){return this.gridApi?this.gridApi.paginationGetCurrentPage()+1:1},set:function(e){this.gridApi.paginationGoToPage(e-1)}}},methods:{getSelectedRows:function(){var e=this.gridApi.getSelectedNodes().map((function(e){return e.data})).map((function(e){return e}));this.$router.push("/crm/company/ViewCompany/".concat(e[0].id)),this.$store.dispatch("crm/companyCurrent",e[0])},editSelectedRows:function(){var e=this.gridApi.getSelectedNodes().map((function(e){return e.data})).map((function(e){return e}));console.log("adfa",e)},deleteSelectedRows:function(){this.gridApi.getSelectedNodes().map((function(e){return e.data})).map((function(e){return e}))},AddCompany:function(){this.popupActivo=!0},updateSearchQuery:function(e){this.gridApi.setQuickFilter(e)},setColumnFilter:function(e,t){var n=null;"all"!==t&&(n={type:"equals",filter:t}),this.gridApi.getFilterInstance(e).setModel(n),this.gridApi.onFilterChanged()},resetColFilters:function(){this.gridApi.setFilterModel(null),this.gridApi.onFilterChanged(),this.roleFilter=this.statusFilter=this.isVerifiedFilter=this.departmentFilter={label:"All",value:"all"},this.$refs.filterCard.removeRefreshAnimation()}},mounted:function(){if(this.gridApi=this.gridOptions.api,this.$vs.rtl){var header=this.$refs.agGridTable.$el.querySelector(".ag-header-container");header.style.left="-"+String(Number(header.style.transform.slice(11,-3))+9)+"px"}var e=this;this.$fireStore.collection("apps").doc("crm").collection(this.activeBusinessInfo.b_uid).doc("assets").collection("total").doc("total").get().then((function(t){if(t.exists){var n=t.data();e.$store.commit("crm/ASSETS_UPDATE",n)}else console.log("No such document!")})).catch((function(e){console.log("Error getting document:",e)}));var t=[];this.$fireStore.collection("apps").doc("crm").collection(this.activeBusinessInfo.b_uid).doc("book").collection("book").where("ass_type","in",["Fixed Assets","Current Assets"]).onSnapshot((function(n){n.docChanges().forEach((function(e){var n=e.doc;t.push({id:n.id,created_date:n.data().last,uid:n.data().uid,asset_name:n.data().ass_name,asset_type:n.data().ass_type,documentation:n.data().docs,branch:n.data().branch,price:n.data().t_cost,quantity:n.data().qty,reference:n.data().ref})})),e.$store.commit("crm/ASSETS_INDV_UPDATE",t)}))}}),d=(n(1107),n(7)),component=Object(d.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"ag-grid-demo"}},[n("vx-card",{staticClass:"mt-12"},[n("div",{staticClass:"flex flex-wrap items-center justify-between"},[n("div",{staticClass:"mb-4 mr-4 md:mb-0 ag-grid-table-actions-left"},[n("vs-dropdown",{staticClass:"cursor-pointer",attrs:{"vs-trigger-click":""}},[n("div",{staticClass:"flex items-center justify-between p-4 font-medium border border-solid rounded-full cursor-pointer d-theme-border-grey-light d-theme-dark-bg"},[n("feather-icon",{attrs:{icon:"ChevronDownIcon",svgClasses:"h-4 w-4"}})],1),e._v(" "),n("vs-dropdown-menu",[n("vs-dropdown-item",{on:{click:function(t){return e.gridApi.paginationSetPageSize(20)}}},[n("span",[e._v("20")])]),e._v(" "),n("vs-dropdown-item",{on:{click:function(t){return e.gridApi.paginationSetPageSize(50)}}},[n("span",[e._v("50")])]),e._v(" "),n("vs-dropdown-item",{on:{click:function(t){return e.gridApi.paginationSetPageSize(100)}}},[n("span",[e._v("100")])]),e._v(" "),n("vs-dropdown-item",{on:{click:function(t){return e.gridApi.paginationSetPageSize(150)}}},[n("span",[e._v("150")])])],1)],1)],1),e._v(" "),n("div",{staticClass:"flex flex-wrap items-center justify-between ag-grid-table-actions-right"},[n("vs-input",{staticClass:"mb-4 mr-4 md:mb-0",attrs:{placeholder:"Search..."},on:{input:e.updateSearchQuery},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}}),e._v(" "),n("vs-button",{staticClass:"mb-4 md:mb-0",on:{click:function(t){return e.gridApi.exportDataAsCsv()}}},[e._v("Export as CSV")]),e._v(" "),n("client-only",[n("addingAssets")],1),e._v(" "),n("vs-button",{on:{click:function(t){return e.$router.push("/crm/assets/breakdown")}}},[e._v("BreakDown")])],1),e._v(" "),n("vs-row",{staticClass:"mt-6"},[n("vs-col",{attrs:{"vs-w":"6"}},[n("vs-button",{staticClass:"mb-4 mr-4 md:mb-0",attrs:{color:"primary"},on:{click:function(t){return e.getSelectedRows()}}},[e._v("View\n          ")]),e._v(" "),n("vs-button",{staticClass:"mb-4 mr-4 md:mb-0",attrs:{color:"danger"},on:{click:function(t){return e.deleteSelectedRows()}}},[e._v("Delete\n          ")])],1),e._v(" "),n("vs-col",{attrs:{"vs-type":"flex","vs-justify":"center","vs-align":"center","vs-w":"6"}})],1)],1),e._v(" "),n("ag-grid-vue",{ref:"agGridTable",staticClass:"my-4 ag-theme-material w-100 ag-grid-table",attrs:{gridOptions:e.gridOptions,columnDefs:e.columnDefs,defaultColDef:e.defaultColDef,rowData:e.assets_indv,rowSelection:"multiple",colResizeDefault:"shift",animateRows:!0,floatingFilter:!0,pagination:!0,paginationPageSize:e.paginationPageSize,suppressPaginationPanel:!0,enableRtl:e.$vs.rtl}}),e._v(" "),n("vs-pagination",{attrs:{total:e.totalPages,max:e.maxPageNumbers},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1),e._v(" "),n("previous")],1)}),[],!1,null,null,null);t.default=component.exports},610:function(e,t,n){},638:function(e,t,n){"use strict";var r=n(610);n.n(r).a},639:function(e,t,n){"use strict";var r=n(1),o=n.n(r),l=n(137),c=n.n(l),d=n(593),v={components:{vSelect:c.a,imageUpload:d.a},data:function(){return{asset_types:["Current Assets","Fixed Assets"],fixed_assets:["Building","Computer Equipment","Computer Software","Construction in progress","Furniture and fixtures","Intangible Assets","Land","Leasehold improvements","Machinery","Office equipment","Vehicles"],interest:0,interestType:"fixed",deposit:0,residual:0,loanTerm:0,expectedLife:1,depreciationType:"straight",valueType:"None",transactionTypes:["Cash","Credit"],transactionType:"",current_assets:["Cash","Cash Equivalent","Inventory","Accounts Receivable","Marketable Securities","Prepaid Expenses","Other Liquid Assets"],cash_equivalents:["Bank Balances","Bank Overdraft","Cheques","Drafts-On-Hand","Demand deposits","Short-term investments"],cash_equivalent:"",inventories:["Raw and Packaging Material","Finished Goods","Work in Progress"],inventory:"",fixed_asset:"",current_asset:"",asset_type:"",assetName:"",branch:"",cost:0,quantity:0,description:"",reference:"",active:!1,popupActivo4:!1}},computed:{activeBusinessInfo:function(){return this.$store.state.business.app_active_business},activeUserInfo:function(){return this.$store.state.user.app_displayed_user},activeCompanyInfo:function(){return this.$store.state.crm.company},uploaded_images:function(){return this.$store.state.form.uploaded_images},totalAmount:function(){return this.quantity*this.cost},loanAmount:function(){return this.totalAmount-this.deposit},straightLine:function(){return(this.totalAmount-this.residual)/this.expectedLife}},watch:{asset_type:function(){"Fixed Asset"==this.asset_type?(this.inventory="",this.current_asset="",this.cash_equivalent=""):"Current Asset"==this.asset_type&&(this.fixed_asset="")},current_asset:function(){"Inventory"==this.current_asset?this.cash_equivalent="":"Cash Equivalent"==this.current_asset&&(this.inventory="")}},methods:{newAsset:function(){var e=this,t={uid:e.activeUserInfo.uid,reference:e.reference,branch:e.branch,asset_type:e.asset_type,asset_name:e.assetName,cost:e.cost,total_cost:e.totalAmount,quantity:e.quantity,description:e.description,value_type:e.valueType,transaction_type:e.transactionType,last_active:o()().format("DD-MM-YYYY"),created_date:o()().format("DD-MM-YYYY"),created_month:o()().format("MM-YYYY"),timestamp:Date.now()};e.uploaded_images&&(t.documentation=e.uploaded_images),"Fixed Assets"==e.asset_type&&(t.fixed_asset=e.fixed_asset),"Current Assets"==e.asset_type&&(t.current_asset=e.current_asset),"Inventory"==e.current_asset&&(t.inventory=e.inventory),"Cash Equivalent"==e.current_asset&&(t.cash_equivalent=e.cash_equivalent),"Depreciation"==e.valueType&&(t.residual=e.residual,t.expected_life=e.expectedLife),"Credit"==e.transactionType&&(t.deposit=e.deposit,t.loan_amount=e.loanAmount,t.loan_term=e.loanTerm,t.interest=e.interest,t.interest_type=e.interestType),this.$fireStore.collection("apps").doc("crm").collection(this.activeBusinessInfo.b_uid).doc("assets").collection("assets").add(t).then((function(){e.inventory="",e.fixed_asset="",e.current_asset="",e.asset_type="",e.assetName="",e.branch="",e.cost=0,e.quantity=0,e.description="",e.reference="",e.interest=0,e.interestType="fixed",e.deposit=0,e.residual=0,e.loanTerm=0,e.expectedLife=1,e.depreciationType="straight",e.valueType="None",e.successUpload()})).catch((function(t){e.unsuccessUpload(t)}))},successUpload:function(){this.$vs.notify({color:"success",title:"Asset Added",text:"Whoop whoop, been uploaded"})},unsuccessUpload:function(e){this.$vs.notify({color:"danger",title:"Oh no",text:"Error ".concat(e)})}}},m=(n(638),n(7)),component=Object(m.a)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"theme-customizer"}},[n("vs-button",{attrs:{color:"primary",type:"filled","icon-pack":"feather",icon:"icon-settings"},on:{click:function(t){e.popupActivo4=!0}}},[e._v("Add Assets")]),e._v(" "),n("vs-popup",{attrs:{title:"Asset allocation",active:e.popupActivo4},on:{"update:active":function(t){e.popupActivo4=t}}},[n("PerfectScrollbar",[n("div",{staticClass:"h-full mx-4"},[n("div",{staticClass:"customizer-header mt-6 flex items-center justify-between px-6"},[n("div",[n("h4",[e._v("Assets")]),e._v(" "),n("small",[e._v("Register your assets")])]),e._v(" "),n("feather-icon",{staticClass:"cursor-pointer",attrs:{icon:"XIcon"},on:{click:function(t){t.stopPropagation(),e.active=!1}}})],1),e._v(" "),n("vs-divider",{staticClass:"mb-0"}),e._v(" "),n("p",{staticClass:"mt-5"},[e._v("Branch")]),e._v(" "),n("v-select",{staticClass:"w-full ",attrs:{options:e.activeBusinessInfo.branches},model:{value:e.branch,callback:function(t){e.branch=t},expression:"branch"}}),e._v(" "),n("p",{staticClass:"mt-5"},[e._v("Asset Type")]),e._v(" "),n("v-select",{staticClass:"w-full ",attrs:{options:e.asset_types},model:{value:e.asset_type,callback:function(t){e.asset_type=t},expression:"asset_type"}}),e._v(" "),"Current Assets"==e.asset_type?n("p",{staticClass:"mt-5"},[e._v("\n          Current Asset Type\n        ")]):e._e(),e._v(" "),"Current Assets"==e.asset_type?n("v-select",{staticClass:"w-full ",attrs:{options:e.current_assets},model:{value:e.current_asset,callback:function(t){e.current_asset=t},expression:"current_asset"}}):e._e(),e._v(" "),"Fixed Assets"==e.asset_type?n("p",{staticClass:"mt-5"},[e._v("\n          Fixed Asset Type\n        ")]):e._e(),e._v(" "),"Fixed Assets"==e.asset_type?n("v-select",{staticClass:"w-full ",attrs:{options:e.fixed_assets},model:{value:e.fixed_asset,callback:function(t){e.fixed_asset=t},expression:"fixed_asset"}}):e._e(),e._v(" "),"Inventory"==e.current_asset&&"Current Assets"==e.asset_type?n("p",{staticClass:"mt-5"},[e._v("\n          Inventory\n        ")]):e._e(),e._v(" "),"Inventory"==e.current_asset&&"Current Assets"==e.asset_type?n("v-select",{staticClass:"w-full ",attrs:{options:e.inventories},model:{value:e.inventory,callback:function(t){e.inventory=t},expression:"inventory"}}):e._e(),e._v(" "),"Cash Equivalent"==e.current_asset&&"Current Assets"==e.asset_type?n("p",{staticClass:"mt-5"},[e._v("\n          Cash Equivalent\n        ")]):e._e(),e._v(" "),"Cash Equivalent"==e.current_asset&&"Current Assets"==e.asset_type?n("v-select",{staticClass:"w-full ",attrs:{options:e.cash_equivalents},model:{value:e.cash_equivalent,callback:function(t){e.cash_equivalent=t},expression:"cash_equivalent"}}):e._e(),e._v(" "),n("vs-input",{staticClass:"w-full mt-5",attrs:{label:"Asset Name",name:"assetname"},model:{value:e.assetName,callback:function(t){e.assetName=t},expression:"assetName"}}),e._v(" "),n("vs-input",{staticClass:"w-full mt-5",attrs:{label:"Purchased Price/Cost per item",name:"number",type:"number"},model:{value:e.cost,callback:function(t){e.cost=t},expression:"cost"}}),e._v(" "),n("vs-input",{staticClass:"w-full mt-5 mb-5",attrs:{label:"Quantity",name:"quantity",type:"number"},model:{value:e.quantity,callback:function(t){e.quantity=t},expression:"quantity"}}),e._v(" "),n("vs-radio",{attrs:{"vs-name":"valueType","vs-value":"Deprection"},model:{value:e.valueType,callback:function(t){e.valueType=t},expression:"valueType"}},[e._v("Deprection")]),e._v(" "),n("vs-radio",{attrs:{"vs-name":"valueType","vs-value":"None"},model:{value:e.valueType,callback:function(t){e.valueType=t},expression:"valueType"}},[e._v("None")]),e._v(" "),"Depreciation"==e.valueType?n("div",[n("vs-radio",{attrs:{"vs-name":"depreciationType","vs-value":"straight"},model:{value:e.depreciationType,callback:function(t){e.depreciationType=t},expression:"depreciationType"}},[e._v("Straight Line")]),e._v(" "),n("vs-radio",{attrs:{"vs-name":"depreciationType","vs-value":"balance"},model:{value:e.depreciationType,callback:function(t){e.depreciationType=t},expression:"depreciationType"}},[e._v("Reducing Balance")]),e._v(" "),n("vs-input",{staticClass:"w-full mt-5",attrs:{label:"Residual Value",name:"residual"},model:{value:e.residual,callback:function(t){e.residual=t},expression:"residual"}}),e._v(" "),n("vs-input",{staticClass:"w-full mt-5",attrs:{label:"Useful life (Months)",name:"expectedLife"},model:{value:e.expectedLife,callback:function(t){e.expectedLife=t},expression:"expectedLife"}})],1):e._e(),e._v(" "),n("p",{staticClass:"mt-5"},[e._v("\n          Transaction Type\n        ")]),e._v(" "),n("v-select",{staticClass:"w-full ",attrs:{options:e.transactionTypes},model:{value:e.transactionType,callback:function(t){e.transactionType=t},expression:"transactionType"}}),e._v(" "),"Credit"==e.transactionType?n("div",[n("vs-input",{staticClass:"w-full mt-5",attrs:{label:"Deposit",name:"deposit"},model:{value:e.deposit,callback:function(t){e.deposit=t},expression:"deposit"}}),e._v(" "),n("vs-input",{staticClass:"w-full mt-5",attrs:{disabled:"",label:"Loan Amount",name:"loanAbout"},model:{value:e.loanAmount,callback:function(t){e.loanAmount=t},expression:"loanAmount"}}),e._v(" "),n("vs-input",{staticClass:"w-full mt-5",attrs:{label:"Loan Term (months)",name:"loanterm"},model:{value:e.loanTerm,callback:function(t){e.loanTerm=t},expression:"loanTerm"}}),e._v(" "),n("vs-input",{staticClass:"w-full mt-5 mb-5",attrs:{label:"Interest",name:"interest"},model:{value:e.interest,callback:function(t){e.interest=t},expression:"interest"}}),e._v(" "),n("vs-radio",{attrs:{"vs-name":"interestType","vs-value":"variable"},model:{value:e.interestType,callback:function(t){e.interestType=t},expression:"interestType"}},[e._v("Variable")]),e._v(" "),n("vs-radio",{attrs:{"vs-name":"interestType","vs-value":"fixed"},model:{value:e.interestType,callback:function(t){e.interestType=t},expression:"interestType"}},[e._v("Fixed")])],1):e._e(),e._v(" "),n("vs-input",{staticClass:"w-full mt-5",attrs:{label:"Reference",name:"reference"},model:{value:e.reference,callback:function(t){e.reference=t},expression:"reference"}}),e._v(" "),n("vs-textarea",{staticClass:"w-full mt-5",attrs:{label:"Description"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}}),e._v(" "),n("div",[n("imageUpload",{staticClass:"mb-2  sm:mb-0",attrs:{label:"Documentation"}}),e._v(" "),n("p",{staticClass:"mt-2 text-sm"},[e._v("\n            Allowed JPG, GIF or PNG. Max size of 800kB\n          ")])],1),e._v(" "),n("div",{staticClass:"flex flex-wrap items-center justify-center p-6",attrs:{slot:"footer"},slot:"footer"},[n("vs-button",{staticClass:"mr-6",on:{click:e.newAsset}},[e._v("Add Asset")]),e._v(" "),n("vs-button",{attrs:{type:"border",color:"danger"},on:{click:function(t){e.isSidebarActiveLocal=!1}}},[e._v("Cancel")])],1)],1)])],1)],1)}),[],!1,null,null,null);t.a=component.exports},764:function(e,t,n){}}]);