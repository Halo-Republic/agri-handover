(this.webpackJsonp=this.webpackJsonp||[]).push([[30],{1209:function(t,e,n){"use strict";n.r(e);n(95),n(14),n(12),n(10),n(23);var o=n(46),c=(n(53),n(1)),r=n.n(c);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var m={data:function(){return{rowsPerPageItems:[8,16,24],pagination:{rowsPerPage:8},company:[],companyName:"Test",details:!0,notes:!1,sales:!1,meetings:!1,clients:!1,currentMeeting:{},companyupdates:null,companyrecords:[],companymeetings:[],currency:null,companySalesRecords:[],id:this.$route.params.id,popupActivo:!1}},computed:{activeBusinessInfo:function(){return this.$store.state.business.app_active_business},activeUserInfo:function(){return this.$store.state.user.app_displayed_user},activeCompanyInfo:function(){return this.$store.state.crm.company}},methods:{goingCustomer:function(){this.$router.push("/crm/company/customers")},goingMeeting:function(){this.$router.push("/crm/company/meeting")},popUpMeeting:function(t){this.currentMeeting=t,this.popupActivo=!0},detailsCheck:function(){this.$data.details=!0,this.$data.notes=!1,this.$data.sales=!1,this.$data.meetings=!1,this.$data.clients=!1},notesCheck:function(){this.$data.details=!1,this.$data.notes=!0,this.$data.sales=!1,this.$data.meetings=!1,this.$data.clients=!1},salesCheck:function(){this.$data.details=!1,this.$data.notes=!1,this.$data.sales=!0,this.$data.meetings=!1,this.$data.clients=!1},meetingsCheck:function(){this.$data.details=!1,this.$data.notes=!1,this.$data.sales=!1,this.$data.meetings=!0,this.$data.clients=!1},clientsCheck:function(){this.$data.details=!1,this.$data.notes=!1,this.$data.sales=!1,this.$data.meetings=!1,this.$data.clients=!0},addUpdates:function(){this.$fireStore.collection("apps").doc("crm").collection(this.activeBusinessInfo.b_uid).doc("company").collection("company").doc(this.activeCompanyInfo.id).collection("companyrecords").add({company_id:this.activeCompanyInfo.id,text:this.companyupdates,company:this.companyName,date:r()().format("DD-MM-YYYY"),timestamp:Date.now()})}},created:function(){var t=this;this.$fireStore.collection("apps").doc("crm").collection(this.activeBusinessInfo.b_uid).doc("company").collection("company").doc(this.activeCompanyInfo.id).collection("companyrecords").orderBy("timestamp","asc").onSnapshot((function(e){e.docChanges().forEach((function(e){if("added"==e.type){var n=e.doc;t.companyrecords.push({id:n.id,text:n.data().text,date:n.data().date,timestamp:r()(n.data().timestamp).format("ll")})}}))})),this.$fireStore.collection("apps").doc("crm").collection(this.activeBusinessInfo.b_uid).doc("company").collection("company").doc(this.activeCompanyInfo.id).collection("sales").orderBy("timestamp","desc").onSnapshot((function(e){e.docChanges().forEach((function(e){if("added"==e.type){var n=e.doc;t.companySalesRecords.push({id:n.id,item:n.data().item_name,price:n.data().price,timestamp:r()(n.data().timestamp).format("ll")})}}))})),this.$fireStore.collection("apps").doc("crm").collection(this.activeBusinessInfo.b_uid).doc("company").collection("company").doc(this.activeCompanyInfo.id).collection("customermeetings").orderBy("timestamp","desc").onSnapshot((function(e){e.docChanges().forEach((function(e){if("added"==e.type){var n=e.doc;t.companymeetings.push({id:n.id,name:n.data().user_name,surname:n.data().user_surname,displayName:n.data().user_displayName,date:n.data().date,startTime:r()(n.data().startTime).format("llll"),endTime:r()(n.data().endTime).format("llll"),time:n.data().time,details:n.data().details,seconds:n.data().seconds,minutes:n.data().minutes,hours:n.data().hours,customers:n.data().customers,geolocation:n.data().geolocation,signature:n.data().signature,created_date:n.data().created_date,timestamp:r()(n.data().timestamp).format("ll")})}}))}));var e=d(d(d(d({},this.activeCompanyInfo),this.companymeetings),this.companySalesRecords),this.companyrecords);this.$store.commit("crm/SET_COMPANY",e)}},v=n(7),component=Object(v.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"w-full vx-col md:mt-10 mt-base"},[n("vs-row",{staticClass:"py-10 mt-12",attrs:{"vs-align":"center","vs-type":"flex","vs-justify":"space-around","vs-w":"12"}},[n("vs-col",{staticClass:"mt-12",attrs:{"vs-type":"flex","vs-justify":"center","vs-align":"center"}},[n("a",{attrs:{href:"tel:"+this.activeCompanyInfo.phone}},[n("vs-button",{attrs:{color:"primary",type:"border",icon:"phone"}})],1),t._v(" "),n("a",{attrs:{href:"mailto:"+t.activeCompanyInfo.email}},[n("vs-button",{attrs:{color:"primary",type:"border",icon:"email"}})],1),t._v(" "),n("a",{attrs:{href:""+this.activeCompanyInfo.addressUrl,target:"_blank"}},[n("vs-button",{attrs:{color:"primary",type:"border",icon:"room"}})],1),t._v(" "),n("vs-button",{attrs:{color:"primary",type:"border",icon:"work"},on:{click:t.goingMeeting}}),t._v(" "),n("vs-button",{attrs:{color:"primary",type:"border",icon:"person"},on:{click:t.goingCustomer}})],1)],1),t._v(" "),n("vx-card",{staticClass:"mt-5"},[n("template",{slot:"no-body"},[n("vs-tabs",{attrs:{"vs-position":"left",alignment:"fixed"}},[n("vs-tab",{attrs:{label:"Details","vs-icon":"extension"}},[n("div",{staticClass:"pl-2 mt-1"},[n("div",{staticClass:"mt-5"},[n("h6",[t._v("Company Name:")]),t._v(" "),n("p",[t._v(t._s(this.activeCompanyInfo.company))])]),t._v(" "),n("div",{staticClass:"mt-5"},[n("h6",[t._v("Email:")]),t._v(" "),n("p",[t._v(t._s(this.activeCompanyInfo.email))])]),t._v(" "),n("div",{staticClass:"mt-5"},[n("h6",[t._v("Phone:")]),t._v(" "),n("p",[t._v(t._s(this.activeCompanyInfo.phone))])]),t._v(" "),n("div",{staticClass:"mt-5"},[n("h6",[t._v("Address:")]),t._v(" "),n("p",[t._v(t._s(this.activeCompanyInfo.formatted_address))])]),t._v(" "),n("div",{staticClass:"mt-5"},[n("h6",[t._v("Source:")]),t._v(" "),n("p",[t._v(t._s(this.activeCompanyInfo.sources))])]),t._v(" "),n("div",{staticClass:"mt-5"},[n("h6",[t._v("Rating:")]),t._v(" "),n("p",[t._v(t._s(this.activeCompanyInfo.ratings))])]),t._v(" "),n("div",{staticClass:"mt-5"},[n("h6",[t._v("Last Meeting:")]),t._v(" "),n("p",[t._v(t._s(this.activeCompanyInfo.lastMeeting))])])])]),t._v(" "),n("vs-tab",{attrs:{label:"Notes","vs-icon":"store"}},[t._l(t.companyrecords,(function(e){return n("div",{key:e.id,staticClass:"mt-5"},[n("b",[t._v(t._s(e.timestamp))]),t._v("\n            "+t._s(e.text)+"\n          ")])})),t._v(" "),n("div",{staticClass:"pl-2 mt-1"},[n("vx-input-group",[n("template",{slot:"prepend"},[n("div",{staticClass:"prepend-text bg-primary"},[n("span",[t._v("Description")])])]),t._v(" "),n("vs-textarea",{model:{value:t.companyupdates,callback:function(e){t.companyupdates=e},expression:"companyupdates"}})],2),t._v(" "),n("div",{staticClass:"flex items-center justify-between p-3 mt-4 mb-4 mr-4 text-base text-lg font-medium border border-solid rounded-lg cursor-pointer text-primary border-primary",on:{click:t.addUpdates}},[n("feather-icon",{attrs:{icon:"PlusIcon",svgClasses:"h-4 w-4"}}),t._v(" "),n("span",{staticClass:"ml-2 text-base text-primary"},[t._v("Add Note")])],1)],1)],2),t._v(" "),n("vs-tab",{attrs:{label:"Sales","vs-icon":"get_app"}},[n("div",{staticClass:"pl-2 mt-1"},t._l(t.companySalesRecords,(function(e){return n("div",{key:e.id,staticClass:"mt-5"},[n("b",[t._v(t._s(e.item)+" - R"+t._s(e.price))]),t._v("\n              "+t._s(e.timestamp)+"\n            ")])})),0)]),t._v(" "),n("vs-tab",{attrs:{label:"Meetings","vs-icon":"link"}},[n("div",{staticClass:"pl-2 mt-1"},t._l(t.companymeetings,(function(e){return n("div",{key:e.id,staticClass:"w-full vx-col lg:w-1/3 sm:w-1/2 mb-base"},[n("vx-card",{staticClass:"p-2",on:{click:function(n){return t.popUpMeeting(e)}}},[n("div",{staticClass:"text-center"},[n("h4",[t._v("\n                    "+t._s(e.displayName)+"\n                  ")]),t._v(" "),n("p",{staticClass:"text-grey"},[t._v("\n                    Duration: "+t._s(e.hours)+"h:"+t._s(e.minutes)+"m:"+t._s(e.seconds)+"s\n                  ")])]),t._v(" "),n("div",{staticClass:"flex justify-between text-center"},[n("span",[n("p",{staticClass:"text-xl font-semibold",staticStyle:{color:"black"}},[t._v("\n                      "+t._s(e.details)+"\n                    ")]),t._v(" "),n("small",{staticClass:"text-grey"},[t._v(t._s(e.created_date))])])])]),t._v(" "),n("vs-popup",{staticClass:"holamundo",attrs:{title:"Meeting",active:t.popupActivo},on:{"update:active":function(e){t.popupActivo=e}}},[n("div",{staticClass:"text-center"},[n("h4",[t._v("\n                    "+t._s(t.currentMeeting.displayName)+"\n                  ")]),t._v(" "),n("p",{staticClass:"text-grey"},[t._v("\n                    Duration: "+t._s(t.currentMeeting.hours)+"h:"+t._s(t.currentMeeting.minutes)+"m:"+t._s(t.currentMeeting.seconds)+"s\n                  ")])]),t._v(" "),n("div",{staticClass:"flex justify-between text-center"},[n("span",[n("p",{staticClass:"text-xl font-semibold",staticStyle:{color:"black"}},[t._v("\n                      "+t._s(t.currentMeeting.details)+"\n                    ")]),t._v(" "),n("small",{staticClass:"text-black"},[t._v(t._s(t.currentMeeting.created_date))])])]),t._v(" "),n("div",{staticClass:"flex justify-between text-center",staticStyle:{border:"solid 1px black",padding:"10px"}},[n("h4",[t._v("\n                    "+t._s(t.currentMeeting.displayName)+"\n                  ")]),t._v(" "),n("img",{staticStyle:{height:"75px"},attrs:{src:t.currentMeeting.signature}})]),t._v(" "),t._l(t.currentMeeting.customers,(function(e){return n("div",{key:e,staticClass:"flex justify-between text-center",staticStyle:{border:"solid 1px black",padding:"10px"}},[n("h4",{staticStyle:{color:"black"}},[t._v("\n                    "+t._s(e.name)+" "+t._s(e.surname)+"\n                  ")]),t._v(" "),n("img",{staticStyle:{height:"75px"},attrs:{src:e.img}})])})),t._v("\n\n                "+t._s(t.currentMeeting.geolocation)+"\n                "),n("client-only",[t.currentMeeting.geolocation?n("GmapMap",{staticStyle:{width:"500px",height:"300px",padding:"15px","text-align":"center"},attrs:{center:t.currentMeeting.geolocation,zoom:7,"map-type-id":"terrain"}},[n("GmapMarker",{attrs:{position:t.currentMeeting.geolocation,clickable:!0,draggable:!0}})],1):t._e()],1)],2)],1)})),0)])],1)],1)],2)],1)}),[],!1,null,null,null);e.default=component.exports}}]);